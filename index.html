<html>
    <head>
        <title>Cat'chu</title>
        <style>
            body {
              background-color: #353839;
              display: flex;
              justify-content: center;
              align-items: center;
              height: 100vh;
              margin: 20;
              cursor: url('https://media.discordapp.net/attachments/1312285788473528410/1391674815722684438/selector.png?ex=686cc1ac&is=686b702c&hm=396f2b21ab0d1fe9744f0e118e13daec12ffa858effc92ed647ff0bca8056cea&=&format=webp&quality=lossless&width=50&height=50') 8 8, auto;
            }

            .meaw {
              position: relative;
              height: 120px;
              width: 150px;
              background-color: #ffcc00;
              border: 8px solid black;
              border-radius: 25px 25px 80px 80px;
              box-shadow: 3px 3px white;
              margin: 20px;
            }

            .right-ear, .left-ear {
              position: absolute;
              height: 0;
              width: 0;
              top: -40px;
              border-left: 25px solid transparent;
              border-right: 25px solid transparent;
              border-bottom: 40px solid black;
              border-radius: 50px;
            }

            .right-ear {
              right: 5px;
            }

            .left-ear {
              left: 5px;
            }

            .eye-l:hover, .eye-r:hover {
              position: absolute;
              height: 30px;
              width: 30px;
              background: transparent;
              border-radius: 50px;
              top: 35px;
              box-shadow: 0 -4px black,
                  0 -8px black;
              /* transform: rotate(180deg); */
              transition: all 0.18s ease;
            }

            .eye-l, .eye-r {
              position: absolute;
              height: 35px;
              width: 30px;
              background: black;
              border-radius: 50px;
              top: 20px;
            }
            .eye-l {
              left: 21px;
            }
            .eye-r {
              right: 20px;
            }

            .eye-l::before, .eye-r::before {
              content: '';
              position: absolute;
              width: 15px;
              height: 15px;
              background: white;
              border-radius: 50%;
              top: 12px;
              left: 7px;
              transform: translate(var(--pupil-x, 0), var(--pupil-y, 0)); /* Critical fix */
              transition: transform 0.1s ease-out;
            }

            .forehead:hover ~ .eye-l::before,
            .forehead:hover ~ .eye-r::before,
            .eye-l:hover::before,
            .eye-r:hover::before {
              opacity: 0;
              /* border-radius: 20px 0 0 0; */
              transition: opacity 0.2s ease;
            }
            .forehead:hover ~ .eye-l,
            .forehead:hover ~ .eye-r {
                position: absolute;
              height: 30px;
              width: 30px;
              background: transparent;
              border-radius: 50px;
              top: 35px;
              box-shadow: 0 -4px black,
                  0 -8px black;
              /* transform: rotate(180deg); */
              transition: all 0.18s ease;
            }

            .forehead {
              position: absolute;
              height: 25px;
              width: 150px;
              background: transparent;
              top: -5px;
              border-radius: 35px 35px 10px 10px;
              cursor: url('https://media.discordapp.net/attachments/1312285788473528410/1391687485418897438/pointer1.png?ex=686ccd78&is=686b7bf8&hm=6fd50b37e99dc9c0daf47ef1fb399c9f5d203a09850fcdd99c1005299c3d43b0&=&format=webp&quality=lossless&width=50&height=50') 8 8, pointer;
            }

            .forehead:hover ~ .cheek-r,
            .forehead:hover ~ .cheek-l {
              background: /*#ff87ab !important;*/#f01c9c !important;
            }
            .cheek-l, .cheek-r {
              position: absolute;
              top: 55px;
              height: 17px;
              width: 25px;
              border-radius: 50px;
              background: transparent;
              transition: background 0.5s ease;
            }
            .cheek-l {
              left: 5px;
            }
            .cheek-r {
              right: 5px;
            }

            .nose {
              position: absolute;
              height: 0;
              width: 0;
              top: 50px;
              right: 60px;
              border-left: 12px solid transparent;
              border-right: 12px solid transparent;
              border-bottom: 16px solid black;
              border-radius: 50px;
              padding: 0;
              box-shadow: none;
              transform: rotate(180deg);
            }

            .nose:hover ~ .open-mouth {
              background: #b70e0e !important;
              transform: translateY(0);
              opacity: 1;
              /* border-top: 20px solid #b70e0e;
              transform: translateX(-50%) scaleY(1.2); */
            }

            .open-mouth {
              position: absolute;
              height: 30px;
              width: 20px;
              /* border-left: 25px solid transparent;
              border-right: 25px solid transparent;
              border-top: 20px solid #b70e0e; */
              background: transparent;
              border-radius: 10px;
              top: 70px;
              left: 67px;
              transform: translateY(-10px);
              opacity: 0;
              transition: transform 0.4s ease, opacity 0.4s ease, background 0.4s ease;
              /* transform: rotate(180deg); */
            }

            .mouth-l, .mouth-r {
              position: absolute;
              height: 30px;
              width: 25px;
              /* background: transparent; */
              background-color: #ffcc00;
              border-radius: 50px;
              top: 55px;
              box-shadow: 0 4px white,
                  2px 4px white;
            }

            .mouth-l {
              left: 79px;
              transform: rotate(20deg);
            }

            .mouth-r {
              right: 73.5px;
              transform: rotate(1deg);
            }
            
            .text-box {
              position: fixed; 
              bottom: 10px; 
              left: 52%; 
              transform: translateX(-50%); 
              width: 90%; 
              max-width: 500px; 
              text-align: center;
              display: flex;
              gap: 10px;
              align-items: center;
            }

            .send-button {
              width: 50px;
              height: 45px;
              background-color: #ffcc00;
              border: None;
              border-radius: 50%;
              font-size: 24px;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              box-shadow: 2px 2px #222;
            }
            .send-button:hover {
              background-color: #ffda48;
              box-shadow: 4px 4px #222;
            }

            .send-button:active {
              transform: scale(0.92);
              box-shadow: 1px 1px #111;
            }

            textarea {
              width: 100%; 
              font-size: 16px; 
              color: #ffffff;
              padding: 10px; 
              border-radius: 8px; 
              background-color: #585b5c;
              border: 3.5px solid #d4b724;
              resize: none;
            }

            textarea:focus {
              outline: none;
              border-color: #ffcc00;
            }
      </style>
    </head>
  <body>
    <div class="meaw">
      <div class="forehead"></div>
      <div class="right-ear"></div>
      <div class="nose"></div>
      <div class="open-mouth"></div>
      <div class="mouth-l"></div>
      <div class="mouth-r"></div>
      <div class="eye-l"></div> 
      <div class="cheek-l"></div>
      <div class="cheek-r"></div>
      <div class="eye-r"></div>
      <div class="left-ear"></div>

      <div class="text-box">
        <textarea id="chat-input" placeholder="Say something to Muffins..." rows="2"></textarea>
        <button id="chat-send" class="send-button">
        <img src="https://media.discordapp.net/attachments/1312285788473528410/1391766125947129926/COLOURBOX47728629.png?ex=686d16b6&is=686bc536&hm=1578da8706429e2383e704fc37d27acace702f69f2de3d8f2c76a5498d76de73&=&format=webp&quality=lossless&width=40&height=40" alt="Send" style="width: 100%; height: 100%; object-fit: contain;"></button>
      </div>


      <script>
      // Eye tracking
      document.addEventListener('mousemove', (e) => {
        const eyes = document.querySelectorAll('.eye-l, .eye-r');

        eyes.forEach(eye => {
          const eyeRect = eye.getBoundingClientRect();
          const eyeX = eyeRect.left + eyeRect.width / 2;
          const eyeY = eyeRect.top + eyeRect.height / 2;

          const angle = Math.atan2(e.clientY - eyeY, e.clientX - eyeX);
          const distance = 5;
          const pupilX = Math.cos(angle) * distance;
          const pupilY = Math.sin(angle) * distance;

          eye.style.setProperty('--pupil-x', `${pupilX}px`);
          eye.style.setProperty('--pupil-y', `${pupilY}px`);
        });
      });

      // DOM Elements
      const meaw = document.querySelector(".meaw");
const mouth = document.querySelector(".open-mouth");
const chatInput = document.getElementById("chat-input");
const sendBtn = document.getElementById("chat-send");

let selectedVoice = null;

// Load preferred voice
function getMeawVoice() {
  const voices = speechSynthesis.getVoices();

  if (!voices.length) {
    setTimeout(getMeawVoice, 200);
    return;
  }

  const preferredVoices = [
    "Microsoft Aria Online (Natural)",  // cat-like and expressive
    "Google UK English Female",
    "Google US English",
    "Microsoft Zira Desktop",
    "Samantha",
    "Karen"
  ];

  for (let name of preferredVoices) {
    const voice = voices.find(v => v.name.includes(name));
    if (voice) {
      selectedVoice = voice;
      break;
    }
  }

  if (!selectedVoice) {
    selectedVoice = voices.find(v => v.lang.startsWith("en")) || voices[0];
  }

  console.log("Meaw will use voice:", selectedVoice.name);
}

// Trigger it properly
if (speechSynthesis.getVoices().length > 0) {
  getMeawVoice(); // voices already loaded
} else {
  speechSynthesis.onvoiceschanged = getMeawVoice; // wait for them
}

// Speak + animate
function speakToMeaw(text) {
  if (!text) return;

  const utterance = new SpeechSynthesisUtterance(text);
  if (selectedVoice) utterance.voice = selectedVoice;

  // 🎵 Make it cat-like
  utterance.pitch = 1.6;  // still playful but less squeaky
  utterance.rate = 0.9;   // default speed

  utterance.onstart = () => {
    meaw.classList.add("speaking");
    mouth.style.transform = "translateY(0)";
    mouth.style.opacity = "1";
    mouth.style.background = "#b70e0e";
  };

  utterance.onend = () => {
    meaw.classList.remove("speaking");
    mouth.style.transform = "translateY(-10px)";
    mouth.style.opacity = "0";
    mouth.style.background = "transparent";
  };

  speechSynthesis.speak(utterance);
}

// Enter to speak
chatInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    const text = chatInput.value.trim();
    speakToMeaw(text);
    chatInput.value = "";
  }
});

// Click to speak
sendBtn.addEventListener("click", () => {
  const text = chatInput.value.trim();
  speakToMeaw(text);
  chatInput.value = "";
});

    </script>

    </div>
  </body>
</html>
